models:
  - disks:
      - disk:
        device: "/dev/sda" # can also be /dev/disk/by-uuid or a command in the form $(command here)
        size: "499G"
        gpt: true # is the partitiontable gpt or msdos (by default gpt if not set)
        partitions:
          - partition:
              name: "efi" # just a usefull name to assign a partitions
              mount: "/boot/efi" # place to mount the partition
              filesystem: "fat32" # type of filesystem as defined in model.models.partition.EFilesystem
              start: "1MiB" # parted syntax for defining a location
              end: "200MiB"
          - partition:
              name: "swap"
              mount: "swap"
              filesystem: "ext4"
              start: "200MiB"
              end: "8GiB"
          - partition:
              name: "root"
              mount: "/"
              filesystem: "ext4"
              start: "8GiB"
              end: "100%"
  - chroots:
      - chroot:
          name: "alpha" # name of the user to chroot
          mount: "/media" # alternative mountpoint to chroot to
      - chroot:
          name: "root"
  - users:
      - user:
          name: "alpha" # user by the name alpha
          password: "123" # the password of said user
      - user:
          name: "zetta"
          password: "456"
          shell: "/bin/zsh" # default shell for the user
          groups:
            - wheel
            - power

  - bootloader:
      device: "/dev/sda"
  - system:
      local: "en_US.UTF-8"
      keymap: "be-latin1"
      hostname: "tos"
      password: "123"
  - packages:
      - package:
          name: "userpackages"
          packagefile: "packages.txt" # either from a file
          package: # or a list in this format
            - a
            - b
  - scripts:
      # todo script should have a user an base command (/bin/sh)
      - script:
          name: "script1"
          file: "test.sh"
          command: "echo hello world"
execution:
  - partitiontable: "/dev/sda" # build a partition table
  - format: "/dev/sda" # format a drive
  - format: "efi" # format partition based on its name
  - mount: "/dev/sda" # mount all partitions from this drive you can also specify a partition
  - bootstrap: # bootstrap the system
  - fstab: # generate fstab based on mounted partitions
  - chroot:
      user: "root" # execute the next steps in the chrooted environment
      steps:
        - systemsetup:
        - createuser: "alpha"
        - bootloader:
  - chroot:
      user: "alpha"
      steps:
        - packages: "userpackages"
  - script:
    name: "script1"
